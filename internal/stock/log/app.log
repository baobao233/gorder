time="2025-02-10T11:45:12+08:00" level=debug msg="dsn = root:root@tcp(localhost:3307)/gorder_v2?charset=utf8mb4&parseTime=True&loc=Local"
time="2025-02-10T11:45:12+08:00" level=info msg="register to consul" addr="127.0.0.1:5003" serviceName=stock
time="2025-02-10T11:45:12+08:00" level=info msg="Start gRPC server, Listening: 127.0.0.1:5003"
time="2025-02-10T11:45:24+08:00" level=info msg="_grpc_request_in" args=Items:{ID:"prod_RPmhK2nexllK3r"  Quantity:10}  Items:{ID:"prod_ROGERol0hYd3tx"  Quantity:5} hook_trace=526dcfecd7c62a3377f531032997042a metadata=MD{x-b3-traceid=[526dcfecd7c62a3377f531032997042a], user-agent=[grpc-go/1.64.0], x-b3-spanid=[94dec9cff7274b1b], x-b3-sampled=[1], :authority=[127.0.0.1:5003], content-type=[application/grpc], traceparent=[00-526dcfecd7c62a3377f531032997042a-94dec9cff7274b1b-01]}
time="2025-02-10T11:45:24+08:00" level=info msg="_redis_setnx_success" cost=3h38m51.333s error=<nil> hook_trace=526dcfecd7c62a3377f531032997042a key="check_stock_prod_RPmhK2nexllK3r_prod_ROGERol0hYd3tx" now=2025-02-10 11:45:24.055223 +0800 CST m=+11.730973584 value=1
time="2025-02-10T11:45:24+08:00" level=info msg="mysql_success" args="{"product_id":["prod_RPmhK2nexllK3r","prod_ROGERol0hYd3tx"]}" cost=10 hook_trace=526dcfecd7c62a3377f531032997042a method=BatchGetStockByID resp=[]
time="2025-02-10T11:45:24+08:00" level=info msg="mysql_success" args="{"product_id":["prod_RPmhK2nexllK3r","prod_ROGERol0hYd3tx"],"for_update":true}" cost=5 hook_trace=526dcfecd7c62a3377f531032997042a method=BatchGetStockByID resp=[]
time="2025-02-10T11:45:24+08:00" level=info msg="mysql_success" args="{"product_id":["prod_RPmhK2nexllK3r"],"quantity":[10]}" cost=10 hook_trace=526dcfecd7c62a3377f531032997042a method=Update resp={0  0 0 0001-01-01 00:00:00 +0000 UTC 0001-01-01 00:00:00 +0000 UTC}
time="2025-02-10T11:45:24+08:00" level=info msg="mysql_success" args="{"product_id":["prod_ROGERol0hYd3tx"],"quantity":[5]}" cost=0 hook_trace=526dcfecd7c62a3377f531032997042a method=Update resp={0  0 0 0001-01-01 00:00:00 +0000 UTC 0001-01-01 00:00:00 +0000 UTC}
time="2025-02-10T11:45:27+08:00" level=info msg="_redis_del_success" cost=1h36m10.834s error=<nil> hook_trace=526dcfecd7c62a3377f531032997042a key="check_stock_prod_RPmhK2nexllK3r_prod_ROGERol0hYd3tx" now=2025-02-10 11:45:27.940942 +0800 CST m=+15.616727042
time="2025-02-10T11:45:27+08:00" level=info msg="Query executed successfully" hook_trace=526dcfecd7c62a3377f531032997042a query=CheckIfItemsInStock query_body="{"Items":[{"ID":"prod_RPmhK2nexllK3r","Quantity":10},{"ID":"prod_ROGERol0hYd3tx","Quantity":5}]}"
time="2025-02-10T11:45:27+08:00" level=info msg="finished unary call with code OK" grpc.code=OK grpc.method=CheckIfItemsInStock grpc.service=stockpb.StockService grpc.start_time="2025-02-10T11:45:24+08:00" grpc.time_ms=3892.939 hook_trace=526dcfecd7c62a3377f531032997042a peer.address="127.0.0.1:65359" span.kind=server system=grpc
