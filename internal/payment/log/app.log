time="2025-02-10T11:45:09+08:00" level=info msg="waiting for order grpc client, timeout: 10 seconds"
time="2025-02-10T11:45:09+08:00" level=info msg="Discovered 1 instance of order, addrs = [127.0.0.1:5002]"
time="2025-02-10T11:45:27+08:00" level=info msg="Payment recieve a message from order.created, msg={"ID":"67a976577913e6cbf375fb1a","CustomerID":"0","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RPmhK2nexllK3r","Name":"Coke","Quantity":10,"PriceID":"price_1QWx7tGPMmgbVtkIivuPtjEt"},{"ID":"prod_ROGERol0hYd3tx","Name":"Fries","Quantity":5,"PriceID":"price_1QVTiGGPMmgbVtkIR6Aiv7up"}]}" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:28+08:00" level=error msg="Failed to execute command,err=rpc error: code = Unknown desc = cannot tramsit from pending to waiting_for_payment" command=CreatePayment command_body="{"Order":{"ID":"67a976577913e6cbf375fb1a","CustomerID":"0","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RPmhK2nexllK3r","Name":"Coke","Quantity":10,"PriceID":"price_1QWx7tGPMmgbVtkIivuPtjEt"},{"ID":"prod_ROGERol0hYd3tx","Name":"Fries","Quantity":5,"PriceID":"price_1QVTiGGPMmgbVtkIR6Aiv7up"}]}}" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:28+08:00" level=debug msg="retrying message , count=1" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:29+08:00" level=info msg="_request_success" args="{"delivery":{"Acknowledger":{},"Headers":{"traceparent":"00-526dcfecd7c62a3377f531032997042a-2775dbe1c91bd99a-01","x-b3-sampled":"1","x-b3-spanid":"2775dbe1c91bd99a","x-b3-traceid":"526dcfecd7c62a3377f531032997042a"},"ContentType":"application/json","ContentEncoding":"","DeliveryMode":2,"Priority":0,"CorrelationId":"","ReplyTo":"","Expiration":"","MessageId":"","Timestamp":"0001-01-01T00:00:00Z","Type":"","UserId":"","AppId":"","ConsumerTag":"ctag-/Users/boubou/project/goProject/gorder/internal/payment/tmp/main-1","MessageCount":0,"DeliveryTag":1,"Redelivered":false,"Exchange":"","RoutingKey":"order.created","Body":"eyJJRCI6IjY3YTk3NjU3NzkxM2U2Y2JmMzc1ZmIxYSIsIkN1c3RvbWVySUQiOiIwIiwiU3RhdHVzIjoicGVuZGluZyIsIlBheW1lbnRMaW5rIjoiIiwiSXRlbXMiOlt7IklEIjoicHJvZF9SUG1oSzJuZXhsbEszciIsIk5hbWUiOiJDb2tlIiwiUXVhbnRpdHkiOjEwLCJQcmljZUlEIjoicHJpY2VfMVFXeDd0R1BNbWdiVnRrSWl2dVB0akV0In0seyJJRCI6InByb2RfUk9HRVJvbDBoWWQzdHgiLCJOYW1lIjoiRnJpZXMiLCJRdWFudGl0eSI6NSwiUHJpY2VJRCI6InByaWNlXzFRVlRpR0dQTW1nYlZ0a0lSNkFpdjd1cCJ9XX0="},"max_retry_count":3}" cost=1001 hook_trace=526dcfecd7c62a3377f531032997042a method=HandleRetry resp=<nil> retry_count=1
time="2025-02-10T11:45:29+08:00" level=warning msg="consume success" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:29+08:00" level=info msg="Payment recieve a message from order.created, msg={"ID":"67a976577913e6cbf375fb1a","CustomerID":"0","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RPmhK2nexllK3r","Name":"Coke","Quantity":10,"PriceID":"price_1QWx7tGPMmgbVtkIivuPtjEt"},{"ID":"prod_ROGERol0hYd3tx","Name":"Fries","Quantity":5,"PriceID":"price_1QVTiGGPMmgbVtkIR6Aiv7up"}]}" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:30+08:00" level=error msg="Failed to execute command,err=rpc error: code = Unknown desc = cannot tramsit from pending to waiting_for_payment" command=CreatePayment command_body="{"Order":{"ID":"67a976577913e6cbf375fb1a","CustomerID":"0","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RPmhK2nexllK3r","Name":"Coke","Quantity":10,"PriceID":"price_1QWx7tGPMmgbVtkIivuPtjEt"},{"ID":"prod_ROGERol0hYd3tx","Name":"Fries","Quantity":5,"PriceID":"price_1QVTiGGPMmgbVtkIR6Aiv7up"}]}}" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:30+08:00" level=debug msg="retrying message , count=2" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:32+08:00" level=info msg="_request_success" args="{"delivery":{"Acknowledger":{},"Headers":{"traceparent":"00-526dcfecd7c62a3377f531032997042a-2775dbe1c91bd99a-01","x-amqp-count":1,"x-b3-sampled":"1","x-b3-spanid":"2775dbe1c91bd99a","x-b3-traceid":"526dcfecd7c62a3377f531032997042a"},"ContentType":"application/json","ContentEncoding":"","DeliveryMode":2,"Priority":0,"CorrelationId":"","ReplyTo":"","Expiration":"","MessageId":"","Timestamp":"0001-01-01T00:00:00Z","Type":"","UserId":"","AppId":"","ConsumerTag":"ctag-/Users/boubou/project/goProject/gorder/internal/payment/tmp/main-1","MessageCount":0,"DeliveryTag":2,"Redelivered":false,"Exchange":"","RoutingKey":"order.created","Body":"eyJJRCI6IjY3YTk3NjU3NzkxM2U2Y2JmMzc1ZmIxYSIsIkN1c3RvbWVySUQiOiIwIiwiU3RhdHVzIjoicGVuZGluZyIsIlBheW1lbnRMaW5rIjoiIiwiSXRlbXMiOlt7IklEIjoicHJvZF9SUG1oSzJuZXhsbEszciIsIk5hbWUiOiJDb2tlIiwiUXVhbnRpdHkiOjEwLCJQcmljZUlEIjoicHJpY2VfMVFXeDd0R1BNbWdiVnRrSWl2dVB0akV0In0seyJJRCI6InByb2RfUk9HRVJvbDBoWWQzdHgiLCJOYW1lIjoiRnJpZXMiLCJRdWFudGl0eSI6NSwiUHJpY2VJRCI6InByaWNlXzFRVlRpR0dQTW1nYlZ0a0lSNkFpdjd1cCJ9XX0="},"max_retry_count":3}" cost=2000 hook_trace=526dcfecd7c62a3377f531032997042a method=HandleRetry resp=<nil> retry_count=2
time="2025-02-10T11:45:32+08:00" level=warning msg="consume success" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:32+08:00" level=info msg="Payment recieve a message from order.created, msg={"ID":"67a976577913e6cbf375fb1a","CustomerID":"0","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RPmhK2nexllK3r","Name":"Coke","Quantity":10,"PriceID":"price_1QWx7tGPMmgbVtkIivuPtjEt"},{"ID":"prod_ROGERol0hYd3tx","Name":"Fries","Quantity":5,"PriceID":"price_1QVTiGGPMmgbVtkIR6Aiv7up"}]}" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:32+08:00" level=error msg="Failed to execute command,err=rpc error: code = Unknown desc = cannot tramsit from pending to waiting_for_payment" command=CreatePayment command_body="{"Order":{"ID":"67a976577913e6cbf375fb1a","CustomerID":"0","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RPmhK2nexllK3r","Name":"Coke","Quantity":10,"PriceID":"price_1QWx7tGPMmgbVtkIivuPtjEt"},{"ID":"prod_ROGERol0hYd3tx","Name":"Fries","Quantity":5,"PriceID":"price_1QVTiGGPMmgbVtkIR6Aiv7up"}]}}" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:32+08:00" level=info msg="moving messages  to dlq" hook_trace=526dcfecd7c62a3377f531032997042a
time="2025-02-10T11:45:32+08:00" level=info msg="_request_success" args="{"delivery":{"Acknowledger":{},"Headers":{"traceparent":"00-526dcfecd7c62a3377f531032997042a-2775dbe1c91bd99a-01","x-amqp-count":2,"x-b3-sampled":"1","x-b3-spanid":"2775dbe1c91bd99a","x-b3-traceid":"526dcfecd7c62a3377f531032997042a"},"ContentType":"application/json","ContentEncoding":"","DeliveryMode":2,"Priority":0,"CorrelationId":"","ReplyTo":"","Expiration":"","MessageId":"","Timestamp":"0001-01-01T00:00:00Z","Type":"","UserId":"","AppId":"","ConsumerTag":"ctag-/Users/boubou/project/goProject/gorder/internal/payment/tmp/main-1","MessageCount":0,"DeliveryTag":3,"Redelivered":false,"Exchange":"","RoutingKey":"order.created","Body":"eyJJRCI6IjY3YTk3NjU3NzkxM2U2Y2JmMzc1ZmIxYSIsIkN1c3RvbWVySUQiOiIwIiwiU3RhdHVzIjoicGVuZGluZyIsIlBheW1lbnRMaW5rIjoiIiwiSXRlbXMiOlt7IklEIjoicHJvZF9SUG1oSzJuZXhsbEszciIsIk5hbWUiOiJDb2tlIiwiUXVhbnRpdHkiOjEwLCJQcmljZUlEIjoicHJpY2VfMVFXeDd0R1BNbWdiVnRrSWl2dVB0akV0In0seyJJRCI6InByb2RfUk9HRVJvbDBoWWQzdHgiLCJOYW1lIjoiRnJpZXMiLCJRdWFudGl0eSI6NSwiUHJpY2VJRCI6InByaWNlXzFRVlRpR0dQTW1nYlZ0a0lSNkFpdjd1cCJ9XX0="},"max_retry_count":3}" cost=0 hook_trace=526dcfecd7c62a3377f531032997042a method=HandleRetry resp=<nil> retry_count=3
time="2025-02-10T11:45:32+08:00" level=warning msg="consume success" hook_trace=526dcfecd7c62a3377f531032997042a
