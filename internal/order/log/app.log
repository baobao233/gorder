time="2025-02-09T16:03:34+08:00" level=info msg="waiting for stock grpc client, timeout: 10 seconds"
time="2025-02-09T16:03:39+08:00" level=info msg="Discovered 1 instance of stock, addrs = [127.0.0.1:5003]"
time="2025-02-09T16:03:39+08:00" level=info msg="register to consul" addr="127.0.0.1:5002" serviceName=order
time="2025-02-09T16:03:39+08:00" level=info msg="Start gRPC server, Listening: 127.0.0.1:5002"
time="2025-02-09T16:04:04+08:00" level=info msg="_request_in" args="{"customer_id":"7","items":[{"id":"prod_RPmhK2nexllK3r","quantity":8},{"id":"prod_RPmhK2nexllK3r","quantity":42},{"id":"prod_ROGERol0hYd3tx","quantity":97}]}" from=127.0.0.1 hook_trace=00000000000000000000000000000000 time=1739088244 uri="/api/customer/7/orders"
time="2025-02-09T16:04:05+08:00" level=info msg="_request_success" args="[{"ID":"prod_RPmhK2nexllK3r","Quantity":50},{"ID":"prod_ROGERol0hYd3tx","Quantity":97}]" cost=753 hook_trace=5b6639e774041263e86dfa9a362d8587 method=StockGRPC.CheckIfItemsInStock resp=<nil>
time="2025-02-09T16:04:05+08:00" level=info msg="_request_success" args="{"order":{"ID":"","CustomerID":"7","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RPmhK2nexllK3r","Name":"","Quantity":50,"PriceID":"price_1QWx7tGPMmgbVtkIivuPtjEt"},{"ID":"prod_ROGERol0hYd3tx","Name":"","Quantity":97,"PriceID":"price_1QVTiGGPMmgbVtkIR6Aiv7up"}]}}" cost=18 hook_trace=5b6639e774041263e86dfa9a362d8587 method=OrderRepositoryMongo.Create resp=<nil>
time="2025-02-09T16:04:05+08:00" level=info msg="_mq_publish_success" args="{"Channel":{},"Routing":"direct","Exchange":"","Queue":"order.created","Body":{"ID":"67a8617540c3699078f4aeb8","CustomerID":"7","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RPmhK2nexllK3r","Name":"","Quantity":50,"PriceID":"price_1QWx7tGPMmgbVtkIivuPtjEt"},{"ID":"prod_ROGERol0hYd3tx","Name":"","Quantity":97,"PriceID":"price_1QVTiGGPMmgbVtkIR6Aiv7up"}]}}" cost=2 hook_trace=5b6639e774041263e86dfa9a362d8587 resp=<nil>
time="2025-02-09T16:04:05+08:00" level=info msg="CreateOrderHandler_command_success" cmd={7 [0x1400000c390 0x1400000c3a8 0x1400000c3c0]} hook_trace=5b6639e774041263e86dfa9a362d8587
time="2025-02-09T16:04:05+08:00" level=info msg="Command executed successfully" command=CreateOrder command_body="{"CustomerID":"7","Items":[{"ID":"prod_RPmhK2nexllK3r","Quantity":8},{"ID":"prod_RPmhK2nexllK3r","Quantity":42},{"ID":"prod_ROGERol0hYd3tx","Quantity":97}]}" hook_trace=5b6639e774041263e86dfa9a362d8587
time="2025-02-09T16:04:05+08:00" level=info msg="_request_out" cost=776 hook_trace=00000000000000000000000000000000 resp="{"errno":0,"message":"success","data":{"customer_id":"7","order_id":"67a8617540c3699078f4aeb8","redirect_url":"http://localhost:8282/success?customerID=7\u0026orderID=67a8617540c3699078f4aeb8"},"trace_id":"5b6639e774041263e86dfa9a362d8587"}"
_RPmhK2nexllK3r","Quantity":42},{"ID":"prod_ROGERol0hYd3tx","Quantity":97}]}" hook_trace=39ba134b63a1497756832a8743df6105
time="2025-02-09T15:28:59+08:00" level=info msg="_request_out" cost=43 hook_trace=00000000000000000000000000000000 resp="{"errno":1,"message":"rpc error: code = Internal desc = ","data":null,"trace_id":"39ba134b63a1497756832a8743df6105"}"
time="2025-02-09T15:35:05+08:00" level=info msg="_request_in" args="{"customer_id":"2","items":[{"id":"prod_RPmhK2nexllK3r","quantity":8},{"id":"prod_RPmhK2nexllK3r","quantity":42},{"id":"prod_ROGERol0hYd3tx","quantity":97}]}" from=127.0.0.1 hook_trace=00000000000000000000000000000000 time=1739086505 uri="/api/customer/2/orders"
time="2025-02-09T15:35:05+08:00" level=error msg="_request_failed" args="[{"ID":"prod_RPmhK2nexllK3r","Quantity":50},{"ID":"prod_ROGERol0hYd3tx","Quantity":97}]" cost=33 error=0x140003ba0a0 hook_trace=b4906ec5c7784830145954d3d4c4262f method=StockGRPC.CheckIfItemsInStock resp=<nil>
time="2025-02-09T15:35:05+08:00" level=info msg="CreateOrderHandler_command_success" cmd={2 [0x140003d6528 0x140003d6540 0x140003d6558]} hook_trace=b4906ec5c7784830145954d3d4c4262f
time="2025-02-09T15:35:05+08:00" level=error msg="Failed to execute command,err=rpc error: code = Internal desc = " command=CreateOrder command_body="{"CustomerID":"2","Items":[{"ID":"prod_RPmhK2nexllK3r","Quantity":8},{"ID":"prod_RPmhK2nexllK3r","Quantity":42},{"ID":"prod_ROGERol0hYd3tx","Quantity":97}]}" hook_trace=b4906ec5c7784830145954d3d4c4262f
time="2025-02-09T15:35:05+08:00" level=info msg="_request_out" cost=34 hook_trace=00000000000000000000000000000000 resp="{"errno":1,"message":"rpc error: code = Internal desc = ","data":null,"trace_id":"b4906ec5c7784830145954d3d4c4262f"}"
